<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Data Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2 {
            color: #333;
        }
        .data-list {
            margin-top: 20px;
        }
        .item {
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
        }
        .item-name {
            font-weight: bold;
            font-size: 18px;
        }
        .item-slug {
            color: #666;
            margin-top: 5px;
        }
        .item-description {
            margin-top: 10px;
        }
        .loading {
            color: #666;
            font-style: italic;
        }
        .error {
            color: red;
        }
        .button-group {
            margin-bottom: 20px;
        }
        button {
            padding: 8px 16px;
            margin-right: 10px;
            cursor: pointer;
        }
        .section {
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <h1>API Data Viewer</h1>
    <p>This page demonstrates fetching data from the API endpoints.</p>
    
    <div class="button-group">
        <button id="fetchCategoriesButton">Fetch Categories</button>
        <button id="fetchPagesButton">Fetch Pages</button>
    </div>
    
    <div id="categoriesResult" class="data-list section">
        <p class="loading">Click the button to fetch categories...</p>
    </div>

    <div id="pagesResult" class="data-list section">
        <p class="loading">Click the button to fetch pages...</p>
    </div>

    <script>
        document.getElementById('fetchCategoriesButton').addEventListener('click', fetchCategories);
        document.getElementById('fetchPagesButton').addEventListener('click', fetchPages);

        async function fetchCategories() {
            const resultDiv = document.getElementById('categoriesResult');
            resultDiv.innerHTML = '<p class="loading">Loading categories...</p>';
            
            try {
                const response = await fetch('/api/categories');
                
                if (!response.ok) {
                    throw new Error(`Failed to fetch categories: ${response.status}`);
                }
                
                const categories = await response.json();
                
                if (categories && categories.length > 0) {
                    resultDiv.innerHTML = '<h2>Categories</h2>';
                    
                    categories.forEach(category => {
                        const itemDiv = document.createElement('div');
                        itemDiv.className = 'item';
                        
                        const nameDiv = document.createElement('div');
                        nameDiv.className = 'item-name';
                        nameDiv.textContent = category.name || 'Unnamed Category';
                        
                        const slugDiv = document.createElement('div');
                        slugDiv.className = 'item-slug';
                        slugDiv.textContent = `Slug: ${category.slug || category._id}`;
                        
                        const descDiv = document.createElement('div');
                        descDiv.className = 'item-description';
                        descDiv.textContent = category.description || 'No description available';
                        
                        itemDiv.appendChild(nameDiv);
                        itemDiv.appendChild(slugDiv);
                        itemDiv.appendChild(descDiv);
                        
                        resultDiv.appendChild(itemDiv);
                    });
                } else {
                    resultDiv.innerHTML = '<h2>Categories</h2><p>No categories found.</p>';
                }
            } catch (error) {
                console.error('Error fetching categories:', error);
                resultDiv.innerHTML = `<h2>Categories</h2><p class="error">Error fetching categories: ${error.message}</p>`;
            }
        }

        async function fetchPages() {
            const resultDiv = document.getElementById('pagesResult');
            resultDiv.innerHTML = '<p class="loading">Loading pages...</p>';
            
            try {
                const response = await fetch('/api/pages');
                
                if (!response.ok) {
                    throw new Error(`Failed to fetch pages: ${response.status}`);
                }
                
                const pages = await response.json();
                
                if (pages && pages.length > 0) {
                    resultDiv.innerHTML = '<h2>Pages</h2>';
                    
                    pages.forEach(page => {
                        const itemDiv = document.createElement('div');
                        itemDiv.className = 'item';
                        
                        const nameDiv = document.createElement('div');
                        nameDiv.className = 'item-name';
                        nameDiv.textContent = page.title || 'Unnamed Page';
                        
                        const slugDiv = document.createElement('div');
                        slugDiv.className = 'item-slug';
                        slugDiv.textContent = `Slug: ${page.slug || page._id}`;
                        
                        const descDiv = document.createElement('div');
                        descDiv.className = 'item-description';
                        descDiv.textContent = page.description || 'No description available';
                        
                        itemDiv.appendChild(nameDiv);
                        itemDiv.appendChild(slugDiv);
                        itemDiv.appendChild(descDiv);
                        
                        resultDiv.appendChild(itemDiv);
                    });
                } else {
                    resultDiv.innerHTML = '<h2>Pages</h2><p>No pages found.</p>';
                }
            } catch (error) {
                console.error('Error fetching pages:', error);
                resultDiv.innerHTML = `<h2>Pages</h2><p class="error">Error fetching pages: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>